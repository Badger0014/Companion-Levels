<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relationship Coach: Boundary Navigator</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS STYLING --- */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            background-color: #ff6f61; /* Soft Red/Coral */
            color: white;
            width: 100%;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        h1 {
            margin: 0 0 5px 0;
        }

        .container {
            width: 90%;
            max-width: 800px;
            padding: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05);
        }

        /* --- Leveling System Styles --- */
        #level-system h2 {
            color: #007bff; /* Blue for key status */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #current-level-name {
            font-size: 1.5em;
            font-weight: 700;
            cursor: pointer; /* To indicate it's clickable for testing */
            text-decoration: underline;
        }

        .progress-bar-container {
            background-color: #e0e0e0;
            border-radius: 10px;
            height: 15px;
            margin: 10px 0 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%; /* Controlled by JS */
            background-color: #28a745; /* Green for progress */
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        #unlock-list {
            list-style: none;
            padding: 0;
        }

        #unlock-list li {
            background: #e6f7ff; /* Light blue background for unlocks */
            margin-bottom: 8px;
            padding: 10px;
            border-left: 5px solid #007bff;
            border-radius: 4px;
        }

        /* --- Warning/Guidance Styles --- */
        .warning-card {
            border: 1px solid #ffc107; /* Yellow warning border */
            background-color: #fffbe6; /* Light yellow background */
        }

        #guidance-section h3 {
            color: #ffc107;
        }

        /* --- AI Coach Styles --- */
        .coach-card {
            background-color: #f8f9fa;
            border: 1px solid #ced4da;
        }

        #user-question {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ced4da;
            border-radius: 6px;
            box-sizing: border-box;
            resize: vertical;
        }

        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        .response-box {
            background-color: #e9ecef;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            white-space: pre-wrap;
            font-size: 0.9em;
        }
    </style>
</head>
<body>

    <header>
        <h1>üíñ Boundary Navigator</h1>
        <p>Your guide to healthy relationship progression. **Level up your communication!**</p>
    </header>

    <div class="container">
        <section id="level-system" class="card">
            <h2>Current Status: <span id="current-level-name">The Scout</span></h2>
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            <p>Level: <span id="current-level">1</span> / 5</p>

            <h3>Milestone Unlocks for Current Level</h3>
            <ul id="unlock-list">
                </ul>
        </section>
        
        <section id="guidance-section" class="card warning-card">
            <h3>‚ö†Ô∏è Intimacy & Boundary Guidance</h3>
            <p id="intimacy-message"></p>
        </section>

        <section id="ai-coach" class="card coach-card">
            <h2>ü§ñ Ask the AI Coach</h2>
            <p>For context-specific advice (e.g., "Is it too soon to meet her friends?").</p>
            <textarea id="user-question" placeholder="Ask your question here..." rows="3"></textarea>
            <button onclick="askAICoach()">Get Advice</button>
            <div id="ai-response" class="response-box"></div>
        </section>

    </div>

    <script>
        /* --- JAVASCRIPT LOGIC --- */

        // --- 1. LEVEL DATA STRUCTURE ---
        const relationshipLevels = [
            {
                level: 1,
                name: "The Scout",
                criteria: "Texting for 3+ days / 1-2 Dates",
                unlocks: [
                    "Casual conversation topics (Hobbies, Work)",
                    "Light teasing/humor (via text/in person)",
                    "Safe to ask for a second date (low pressure)"
                ],
                intimacy_guidance: "‚ö†Ô∏è **Warning (Boundaries):** Discussions about deep personal past or expectations of intimacy are **strongly discouraged**. Focus on light, fun interaction and learning common interests."
            },
            {
                level: 2,
                name: "The Prospect",
                criteria: "3+ Dates / First Kiss/Prolonged Hand-holding",
                unlocks: [
                    "Using light, non-committal pet names ('Cutie', 'Sweetie')",
                    "Appropriate to plan dates 1 week in advance",
                    "Safe to give genuine non-sexual physical compliments"
                ],
                intimacy_guidance: "ü§ù **Suggestion (Comfort):** Appropriate time to gauge comfort with light physical contact (arm around shoulder, sitting close). **Safety First:** ALWAYS respect verbal boundaries. Communication is key."
            },
            {
                level: 3,
                name: "The Rookie",
                criteria: "Exclusivity Talk / 1-3 Months Dating",
                unlocks: [
                    "Using committed pet names ('Babe', 'Honey')",
                    "Safe to meet close friends (Group setting)",
                    "Appropriate to stay overnight (with pre-discussed boundaries)"
                ],
                intimacy_guidance: "üí¨ **Suggestion (Discussion):** It's appropriate to discuss future expectations on intimacy and relationship dynamics. **Caution:** Never pressure. Ensure enthusiasm and ongoing consent for everything."
            },
            {
                level: 4,
                name: "The MVP",
                criteria: "6+ Months / Declared Official Relationship",
                unlocks: [
                    "Appropriate to introduce to parents/family",
                    "Safe to plan joint weekend trips/vacations",
                    "Safe to say 'I love you' (if emotionally ready)"
                ],
                intimacy_guidance: "‚úÖ **Green Zone (Vulnerability):** Appropriate to discuss past relationship experiences and complex emotional needs. Continue to prioritize open communication, especially during conflict."
            },
            {
                level: 5,
                name: "Hall of Famer",
                criteria: "1+ Year / Discussion of Long-Term Future",
                unlocks: [
                    "Appropriate to discuss shared finances or moving in",
                    "Safe to give partner key to apartment/house",
                    "Discussions about engagement/marriage/children"
                ],
                intimacy_guidance: "üè° **Safety (Habit):** Communication about intimacy and boundaries should be a consistent, loving habit, not just a one-time discussion. Prioritize emotional safety and respect."
            }
        ];

        // --- 2. FRONT-END DISPLAY LOGIC ---

        // Set the current user's level (default starting point)
        let userLevel = 1;

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize the app display
            renderLevel(userLevel);

            // Functionality to advance level (for testing purposes)
            document.getElementById('current-level-name').addEventListener('click', () => {
                if (userLevel < 5) {
                    userLevel++;
                    renderLevel(userLevel);
                } else {
                    alert('You have reached the top level!');
                }
            });
        });

        function renderLevel(level) {
            const currentData = relationshipLevels[level - 1];
            
            // Update basic level info
            document.getElementById('current-level').textContent = currentData.level;
            document.getElementById('current-level-name').textContent = currentData.name;
            document.getElementById('intimacy-message').innerHTML = currentData.intimacy_guidance;

            // Update the progress bar
            const progress = (level / relationshipLevels.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';

            // Update the unlock list
            const unlockList = document.getElementById('unlock-list');
            unlockList.innerHTML = ''; // Clear previous list
            currentData.unlocks.forEach(unlock => {
                const li = document.createElement('li');
                li.textContent = unlock;
                unlockList.appendChild(li);
            });
        }

        // --- 3. AI COACH INTEGRATION LOGIC (Placeholder) ---

        // **IMPORTANT SECURITY NOTE:** Do not run API calls directly from client-side JS with your key! 
        // This function simulates the response, as the API call should be handled securely on a server.

        async function askAICoach() {
            const question = document.getElementById('user-question').value;
            const responseBox = document.getElementById('ai-response');
            responseBox.innerHTML = 'Thinking... ü§î';
            
            if (!question.trim()) {
                responseBox.textContent = 'Please enter a question.';
                return;
            }

            const currentLevelName = relationshipLevels[userLevel - 1].name;
            
            // **The Payload for the AI API (Crucial for Context)**
            const prompt = `${getSystemPrompt(currentLevelName)} \n\nUser's Current Status: ${currentLevelName} (Level ${userLevel}). \n\nUser Question: ${question}`;

            // --- Simulation of API Call ---
            
            // This is where you would replace the code below with a secure fetch() 
            // call to your server (e.g., Firebase Function or Node.js endpoint) 
            // which then calls the actual AI (OpenAI/Gemini).
            
            await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate network latency

            responseBox.innerHTML = `**AI Coach Response (Simulated):**<br><br>
                *Your question has been securely processed with the context of Level ${userLevel} - ${currentLevelName}.*<br><br>
                *In a real application, the AI would generate a safe, consent-focused answer here.*<br><br>
                **System Prompt Used (Excerpt):** "${getSystemPrompt().substring(0, 100)}..."`;
            
            document.getElementById('user-question').value = ''; // Clear the input
        }

        // --- 4. THE SYSTEM PROMPT FUNCTION (The Ethical Rules) ---

        function getSystemPrompt(currentLevelName = "Unknown") {
            // This is the essential set of rules that governs the AI's behavior and ensures safety.
            return `
                You are 'The Boundary Navigator Coach,' a supportive, non-judgemental relationship advisor.
                Your primary goal is to promote **open communication, mutual comfort, and enthusiastic consent** above all else.
                
                **CORE DIRECTIVES:**
                1. **Safety First:** Never provide explicit advice on physical acts. Your advice must focus ONLY on the *communication* and *timing* surrounding relationship milestones.
                2. **Prioritize the Partner:** Always state that the safest, healthiest move is to **ask the partner directly**. Your advice is only a suggestion for *when* the conversation is appropriate.
                3. **Context Awareness:** All answers must be tailored to the user's current level (${currentLevelName}). If the question is far too advanced for their level, issue a polite but firm **üö´ WARNING** about potential boundary crossing.
                4. **Tone:** Use encouraging, supportive, and mature language. Avoid slang.
                
                **RESPONSE STRUCTURE:**
                Start your response with either a **‚úÖ SUGGESTION** or a **üö´ WARNING**.
                Then, provide 2-3 short, actionable pieces of advice.
                Conclude with a clear reminder about communication.
            `;
        }
    </script>
</body>
</html>
